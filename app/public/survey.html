<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Hello Bulma!</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css">

    <link href="style.css" rel="stylesheet" type="text/css">

    <script defer src="https://use.fontawesome.com/releases/v5.0.0/js/all.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  </head>
  <body>

<!-- 
Then find the friend with the greatest compatibility! -->

    <section class="hero is-info is-bold">
      <div class="hero-body">
        <div class="container">
          <h1 class="title">
            PretendFriend
          </h1>
          <h2 class="subtitle">
         Survey
          </h2>

  </section>




<section class="section">

    <div class="container">
      <h1 class="title">Section</h1>
      <h2 class="subtitle">
        A simple container to divide your page into <strong>sections</strong>, like the one you're currently reading
      </h2>
    </div>

<div class="field">
  <label class="label">Name</label>
  <div class="control">
    <input class="input" type="text" placeholder="Text input" id="inputName">
  </div>
</div>

<div class="field">
  <label class="label">Image URL</label>
  <div class="control">
    <input class="input" type="text" placeholder="Text input" id="inputImage">
  </div>
</div>

<div class="field">
  <label class="label">Question 1</label>
  <div class="control" id="inputQuestion">
    <label class="radio"><input type="radio" name="foobar">1</label>
    <label class="radio"><input type="radio" name="foobar">2</label>
    <label class="radio"><input type="radio" name="foobar" checked>3</label>
    <label class="radio"><input type="radio" name="foobar">4</label>
    <label class="radio"><input type="radio" name="foobar">5</label>
  </div>
</div>


    <a class="button is-danger">
<!--       <span class="icon">
        <i class="fas fa-id-card"></i>
      </span> -->
      <span>Submit</span>
    </a>

  </section>



<footer class="footer">
  <div class="container">
    <div class="content">
      <a class="button is-small is-info submit" href="https://github.com/jstudenski/pretendFriend" target="_blank">
        <span class="icon is-small">
          <i class="fab fa-github"></i>
        </span>
        <span>GitHub</span>
      </a>
      <a class="button is-small is-info" href="/api/friends">Friends API</a>
    </div>
  </div>
</footer>


<script type="text/javascript">

    // In this code below we create the Front-end JavaScript which "POSTS" our form data to our express server.
    // In essence, when the user hits submit, jQuery grabs all of the fields then sends a post request to our api
    // Our api recognizes the route (/api/tables)... and then runs the associated code (found in api-routes.js).
    // In this case the associated code "saves" the data to the table-data.js file or waitinglist-data.js file

    $(".submit").on("click", function(event) {
      event.preventDefault();

      // Here we grab the form elements
      var newFriend = {
        name: $("#inputName").val().trim(),
        photo: $("#inputImage").val().trim(),
        scores: $("#inputQuestion").val().trim()
      };

      console.log(newFriend);

      // This line is the magic. It"s very similar to the standard ajax function we used.
      // Essentially we give it a URL, we give it the object we want to send, then we have a "callback".
      // The callback is the response of the server. In our case, we set up code in api-routes that "returns" true or false
      // depending on if a tables is available or not.

      $.post("/api/friends", newFriend,
        function(data) {

          // If a table is available... tell user they are booked.
          if (data) {
            alert("Yay! You are officially booked!");
          }

          // If a table is available... tell user they on the waiting list.
          else {
            alert("Sorry you are on the wait list");
          }

          // Clear the form when submitting
          // $("#reserve-name").val("");
          // $("#reserve-phone").val("");
          // $("#reserve-email").val("");
          // $("#reserve-unique-id").val("");

        });

    });

</script>





  </body>
</html>
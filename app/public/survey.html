<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Hello Bulma!</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css">

    <link href="style.css" rel="stylesheet" type="text/css">

    <script defer src="https://use.fontawesome.com/releases/v5.0.0/js/all.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/chance/1.0.13/chance.min.js"></script>

    


  </head>
  <body>

<!-- 
Then find the friend with the greatest compatibility! -->

<section class="hero is-info is-bold">
  <div class="hero-body">
    <div class="container">
      <h1 class="title">
        PretendFriend
      </h1>
      <h2 class="subtitle">
     Survey
      </h2>
    </div>
  </div>
</section>




<section class="section">

<!-- <div class="container">
    <h1 class="title">Section</h1>
    <h2 class="subtitle">
      A simple container to divide your page into <strong>sections</strong>, like the one you're currently reading
    </h2>
  </div> container -->

  <div class="field">
    <label class="label">Name</label>
    <div class="control">
      <input class="input" type="text" placeholder="Text input" id="inputName">
    </div>
  </div>

  <div class="field">
    <label class="label">Image URL</label>
    <div class="control">
      <input class="input" type="text" placeholder="Text input" id="inputImage">
    </div>
  </div>


  <a class="button is-info is-small randomize">
    <span class="icon">
      <i class="fas fa-random"></i>
    </span>
    <span>Randomize</span>
  </a>


  <div class="field radio-questions">
    <!-- generated radio buttons -->
  </div>

  <a class="button is-danger submit">
    <span>Submit</span>
  </a>

</section>


<section class="section results">
</section>



<footer class="footer">
  <div class="container">
    <div class="content">
      <a class="button is-small is-info" href="https://github.com/jstudenski/pretendFriend" target="_blank">
        <span class="icon is-small">
          <i class="fab fa-github"></i>
        </span>
        <span>GitHub</span>
      </a>
      <a class="button is-small is-info" href="/api/friends">Friends API</a>
    </div>
  </div>
</footer>


<script type="text/javascript">






function randomName() {
  var currentURL = window.location.origin;

  var firstname;
  var lastname;
  $.ajax({
      url: currentURL + "/api/random",
      method: "GET"
  }).then(function(names) {

      var male = names.firstNames.male
      var female = names.firstNames.female

     // var firstname;
      var lastname = names.lastNames[Math.floor(Math.random() * names.lastNames.length)];

      if ((Math.floor(Math.random() * 2) === 1)) {
        firstname = male[Math.floor(Math.random() * male.length)];

      } else {
        firstname = female[Math.floor(Math.random() * female.length)];

      }
      console.log("333" + firstname+lastname)
      return firstname+lastname;
     // 
  });
        console.log("111");

        console.log("222");
}
    

// function hasReturn() {
//   return "hello!";
// }
//console.log( randomName() );
// "hello!"

// generate questions html
var questions = ['Question 1', 'Second Question', 'Question 2'];
for (var i = 0; i < questions.length; i++) {
  $('.radio-questions').append(questions[i] + '<br>');
  var name = 'question'+i;
  for (var r = 1; r < 6; r++) {
    // generate radio buttons
    var label = $('<label>')
      .addClass('radio')
      .html(r);
    var input = $('<input type="radio">')
      .attr('name', name)
      .attr('value', r)
      .appendTo(label);
      if (r===3){input.prop('checked', true)}
    label.appendTo($('.radio-questions'));
   }
  $('.radio-questions').append('<br>');
}


$(".randomize").on("click", function() {
  var rand;
  for (var i = 0; i < questions.length; i++) {
    rand = Math.floor(Math.random() * Math.floor(5));
    $('input:radio[name=question'+i+']')[rand].checked = true;
  }

 // var stateName = ;
  console.log(randomName());
 $("#inputName").val();
  //console.log(Chance.first({ nationality: "us" }));

});







    // submit button
    $(".submit").on("click", function(event) {
      event.preventDefault();

      var responses = [];

      for (var i = 0; i < questions.length; i++) {
        responses.push(parseInt($('input[name='+'question'+ i +']:checked').val()));
      }


      var newFriend = {
        name: $("#inputName").val().trim(),
        photo: $("#inputImage").val().trim(),
        scores: responses// responses
      };

      console.log(newFriend);


      $.post("/api/friends", newFriend,
        function(data) {

          // If a table is available... tell user they are booked.
          if (data) {
            alert("Yay! You are officially booked!");
          }

          // If a table is available... tell user they on the waiting list.
          else {
            alert("Sorry you are on the wait list");
          }


          var currentURL = window.location.origin;
            $.ajax({ url: currentURL + "/api/friends", method: "GET" }).then(function(friends) {

              console.log(friends)

              for (var i = 0; i < friends.length; i++) {

                    $(".results").append(friends[i].name);

                    $(".results").append(friends[i].scores);


                    $(".results").append('<br>');

              }
           });

          // Clear the form when submitting
          // $("#reserve-name").val("");
          // $("#reserve-phone").val("");
          // $("#reserve-email").val("");
          // $("#reserve-unique-id").val("");

        });

    });

myArray = [3,2,1,5,1];
computerArray = [4,2,1,2,3];

function diffCheck(arr1, arr2){
  // make sure arrays are the same length
  if (arr1.length != arr2.length) {
    throw "Arrays not the same length!";
  }

  var totalDiff = 0;

  for (var i = 0; i < arr1.length; i++) {
    totalDiff += Math.abs(arr1[i]-arr2[i]);
  }

  console.log(totalDiff);
}

diffCheck(myArray, computerArray);


</script>





  </body>
</html>